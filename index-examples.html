<!DOCTYPE html>
<html lang="ja">

<head>

  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="shortcut icon" type="image/x-icon" href="./static/site/img/favicon.ico">

  <title>Three.js examples</title>

  <style type="text/css">
    * {
      margin: 0;
      padding: 0;
    }

    html {
      font-size: 62.5%;
    }

    body {
      font-size: 1.6em;
      font-family: Verdana, "ＭＳ Ｐゴシック", sans-serif;
      margin: 16px;
      padding: 0;
    }

    .wrapper {
      display: grid;
      column-gap: 8px;
      row-gap: 8px;
      grid-template-columns: 1fr;
    }

    /*
    1-2
     ■
    2--
     □
    3--
    */
    .header_panel {
      grid-row: 1 / 2;
      grid-column: 1 / 2;
      height: 30px;

      /* disable select text */
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }

    /*
    1-2
     □
    2--
     ■
    3--
    */
    .main_panel {
      grid-row: 2 / 3;
      grid-column: 1 / 2;
    }


    h2 {
      display: inline-block;
      font-weight: bold;
      border-bottom: solid 3px #000;
      margin: 60px auto 30px;
      padding: 0 0 5px 0;
    }
  </style>

</head>

<body>

  <div class="wrapper">

    <div class="header_panel">

      <span style="float: right; margin-left: 20px; margin-right: 20px;">
        <a href="https://github.com/takamitsu-iida/threejs-practice" target="_blank" rel="noopener noreferrer">source code</a> (github)
      </span>

    </div>

    <div class="main_panel">

      <h1>勉強用に作成したもの一覧</h1>

      <br><br>

      <p>
        画像クリックでライブデモに移動。
      </p>


      <h2>ノード</h2>

      <p>球体でノードを表現する例。</p>
      <p>グループ化することで内部にテクスチャを張っているが、作成する順番が重要で、球体を最後にしないと内部が見えなくなる。</p>
      <p>選択したときのブリンクエフェクトは、内部のもう一つ同じサイズの球体を作成してvisibleをトグルすることで実現している。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-node.html">
          <figure>
            <img src="./asset/index-node.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-node.html">index-node.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/node.js">node.js</a>
      </p>



      <h2>ノードとエッジ</h2>

      <p>半透明に設定した物体を線で結ぶ場合に、物体の内部にある線を描画するか、しないか、を制御する例。</p>
      <p>renderOrder, depthWrite, depthTest の組み合わせで制御する。</p>
      <p>青い球体は内部まで線が描画されているのに対して、赤い球体は球の外側から線が描画されている。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-node-edge.html">
          <figure>
            <img src="./asset/index-node-edge.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-node-edge.html">index-node-edge.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/node-edge.js">node-edge.js</a>
      </p>



      <h2>CSS3DとTween.js</h2>

      <p>本家Three.jsの例から引用。</p>
      <p>レイアウトを決める方法が勉強になる。</p>
      <p>Vector3.setFromSphericalCoords(radius : Float, phi : Float, theta : Float )で球の上に配置。</p>
      <p>Vector3.setFromCylindricalCoords ( radius : Float, theta : Float, y : Float )でスパイラル上に配置。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-css3d-periodictable.html">
          <figure>
            <img src="./asset/index-css3d-periodictable.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-css3d-periodictable.html">index-css3d-periodictable.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/css3d-periodictable.js">css3d-periodictable.js</a>
      </p>



      <h2>曲線</h2>

      <p>THREE.CatmullRomCurve3()に適当な座標をいくつか与えて、滑らかな曲線を作る例。</p>
      <p>複雑な曲線を滑らかにするにはそれなりのポイント数が必要であることがわかる。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-curve.html">
          <figure>
            <img src="./asset/index-curve.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-curve.html">index-curve.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/curve.js">curve.js</a>
      </p>



      <h2>影</h2>

      <br>

      <p>基本中の基本ではあるものの、影を綺麗に出すのは意外に調整が難しい。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-shadow.html">
          <figure>
            <img src="./asset/index-shadow.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-shadow.html">index-shadow.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/shadow.js">shadow.js</a>
      </p>



      <h2>パーティクル</h2>

      <p>Udemyの講座から引用。</p>
      <p>テクスチャをあてて綺麗にしている。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-particles.html">
          <figure>
            <img src="./asset/index-particles.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-particles.html">index-particles.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/particles.js">particles.js</a>
      </p>



      <h2>旗</h2>

      <p>Udemyの講座から引用</p>
      <p>ShaderMaterialとGLSLで記述したシェーダーを使った例。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-flag.html">
          <figure>
            <img src="./asset/index-flag.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-flag.html">index-flag.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/flag.js">flag.js</a>
      </p>



      <h2>波</h2>

      <p>Udemyの講座から引用</p>
      <p>ShaderMaterialとシェーダーを使った例</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-wave.html">
          <figure>
            <img src="./asset/index-wave.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-wave.html">index-wave.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/wave.js">wave.js</a>
      </p>



      <h2>地球</h2>

      <p>ICS MEDIAの<a href="https://ics.media/entry/10657/">記事</a>から引用。</p>
      <p>グループ化をうまく使っている例。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-geoarc.html">
          <figure>
            <img src="./asset/index-geoarc.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-geoarc.html">index-geoarc.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/geoarc.js">geoarc.js</a>
      </p>



      <h2>回転するパーティクル</h2>

      <p>オブジェクトを回転させる方法を調べるために作成。</p>
      <p>パーティクルの場合にどう回転するのか、を確認したもの。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-points.html">
          <figure>
            <img src="./asset/index-points.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-points.html">index-points.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/points.js">points.js</a>
      </p>



      <h2>クォータニオン</h2>

      <p>オブジェクトを回転させる方法を調べるために作成。</p>
      <p>初期状態で傾きを付けられたオブジェクトを期待通りに回転させるのは意外に難しい。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-quaternion.html">
          <figure>
            <img src="./asset/index-quaternion.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-quaternion.html">index-quaternion.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/quaternion.js">quaternion.js</a>
      </p>



      <h2>プレーンジオメトリ</h2>

      <p>基本中の基本。</p>
      <p>ジオメトリの座標を時間経過で加工して波打たせたもの。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-plane-wave.html">
          <figure>
            <img src="./asset/index-plane-wave.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-plane-wave.html">index-plane-wave.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/plane-wave.js">plane-wave.js</a>
      </p>



      <h2>地形</h2>

      <p>本家Three.jsの例から引用。</p>
      <p>これはわからないところが多いのでさらなる深堀りが必要。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-terrain.html">
          <figure>
            <img src="./asset/index-terrain.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-terrain.html">index-terrain.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/terrain.js">terrain.js</a>
      </p>



      <h2>地形・その２</h2>

      <p>深堀りした結果、だいぶ分かってきた。</p>
      <p>地形図を生成する最小コードはこれだと思う。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-terrain2.html">
          <figure>
            <img src="./asset/index-terrain2.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-terrain2.html">index-terrain2.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/terrain2.js">terrain2.js</a>
      </p>



      <h2>地形・その３</h2>

      <p>元になるデータがグリッドの場合は三角形のポリゴンを簡単に作れるけど、データが点群だった場合にどうするか。</p>
      <p>これを解決するのがデローネ三角形（Delaunary Triangulation）。</p>
      <p>英語版のWikipediaに詳しい説明がある。</p>
      <p>DelaunatorというJavaScriptのライブラリがあるので、これを使うと簡単に点群をポリゴン化できる。</p>
      <br>
      <p>引用元は<a href="https://hofk.de/main/discourse.threejs/2018/Triangulation/Triangulation.html">こちら</a>。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-delaunary-triangulation.html">
          <figure>
            <img src="./asset/index-delaunary-triangulation.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-delaunary-triangulation.html">index-delaunary-triangulation.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/delaunary-triangulation.js">delaunary-triangulation.js</a>
      </p>



      <h2>プレーンジオメトリ</h2>

      <p>ネットに掲載されていたシェーダーの使用例からシェーダー部分を取り除いたもの。</p>
      <p>プレーンジオメトリにパーリンノイズを乗せて歪ませている。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-plane.html">
          <figure>
            <img src="./asset/index-plane.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-plane.html">index-plane.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/plane.js">plane.js</a>
      </p>



      <h2>シェーダーマテリアル</h2>

      <p>上記の歪めたプレーンジオメトリに対してフラグメントシェーダーで等圧線を描画したもの。</p>
      <p>模様として描いているに過ぎないので、使い道があるのか悩みどころ。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-plane-grid.html">
          <figure>
            <img src="./asset/index-plane-grid.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-plane-grid.html">index-plane.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/plane-grid.js">plane-grid.js</a>
      </p>



      <h2>組み込みシェーダー加工</h2>

      <p>onBeforeCompileを使って組み込みシェーダーを加工して等高線を描画したもの。</p>
      <p>法線の実装とか面倒なので、実際にはこっちを使うことが多いのかな。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-plane-grid2.html">
          <figure>
            <img src="./asset/index-plane-grid2.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-plane-grid2.html">index-plane-grid2.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/plane-grid2.js">plane-grid2.js</a>
      </p>



      <h2>Marching Squares</h2>

      <p>マーチングスクエア法をThree.jsで実装したもの。</p>
      <p>せっかく3Dなんだから、もうちょっと綺麗にした方がよかったかもしれない。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-marching-squares.html">
          <figure>
            <img src="./asset/index-marching-squares.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-marching-squares.html">index-marching-squares.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/marching-squares.js">marching-squares.js</a>
      </p>



      <h2>Marching Cubes</h2>

      <p>マーチングキューブ法を使って等値面を描画し、地形図のように見せたもの。</p>
      <p><a href="https://deep110.github.io/posts/blogs/2022-06-25-terrain-editor-marching-cubes.html">Terrain Generation and Editing using Marching Cubes</a>を元に作成。元記事のコードは間違っている部分があるので要注意。</p>
      <p>あくまで等値面を描画しているだけなので地形図の作成には使えないが、ポリゴンの作り方やFloat32Arrayでのバッファの持ち方など、とても勉強になった。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-marching-cubes.html">
          <figure>
            <img src="./asset/index-marching-cubes.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-marching-cubes.html">index-marching-cubes.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/marching-cubes.js">marching-cubes.js</a>
      </p>



      <h2>Lookup Table</h2>

      <p>頂点の座標に応じて色を付ける例。ヒートマップを表現するのに便利。</p>
      <p>Three.jsのexamplesにある<a href="https://threejs.org/examples/#webgl_geometry_colors_lookuptable">webgl_geometry_colors_lookuptable</a>を参考に作成。</p>
      <p>Lut.jsを使うと数字から色に変換できるので、あとは力技で頂点に色を付けている。</p>
      <p>組み込みで定義されているカラーマップは4個（'rainbow', 'cooltowarm', 'blackbody', 'grayscale'）だけなので、別の色を使いたい場合はLut.jsを直接書き換えればいい。</p>
      <br>
      <p>なお、バージョンr168に同梱されているLut.jsを使うとChromeのコンソールにwarningが出るので、1行だけ書き換えて使っている。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-lookuptable.html">
          <figure>
            <img src="./asset/index-lookuptable.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-lookuptable.html">index-lookuptable.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/lookuptable.js">lookuptable.js</a>
      </p>



      <h2>Load CSV point cloud</h2>

      <p>魚群探知機から抽出した水深のCSVデータをロードして点群として表示する例。</p>
      <p>CSVの転送に時間がかかるので、その間はローディング画面を表示。</p>
      <p>単に表示するだけならパーティクルと同じくnew THREE.Points()を使うと簡単にできる。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-load-csv.html">
          <figure>
            <img src="./asset/index-load-csv.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-load-csv.html">index-load-csv.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/load-csv.js">load-csv.js</a>
      </p>



      <h2>InstancedMesh with SelectionBox</h2>

      <p>メッシュを一つ作成して、GPUに同じ物を複数作れ、と指示するのがTHREE.InstancedMeshで、これを使って点群を表示することもできる。</p>
      <p>SelectionBoxを使うと、GPU側で作成した個々のメッシュを選択できる。</p>
      <p>ただし、選択はできるものの、個々のメッシュに独自のアトリビュートを持たせられるわけではないので、色を変えるとか、見た目を変えることしかできない。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-load-csv-instancedmesh-selectionbox.html">
          <figure>
            <img src="./asset/index-load-csv-instancedmesh-selectionbox.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-load-csv-instancedmesh-selectionbox.html">index-load-csv-instancedmesh-selectionbox.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/load-csv-instancedmesh-selectionbox.js">load-csv-instancedmesh-selectionbox.js</a>
      </p>



      <h2>InstancedBufferGeometry with SelectionBox</h2>

      <p>ジオメトリを一つ作成して、GPUに同じものを複数作れ、と指示するのがTHREE.InstancedBufferGeometryで、これを使うと任意のアトリビュートを持たせることができる。</p>
      <p>ただし、普通にメッシュ化すると一つのメッシュになってしまうのでSelectionBoxで選択できるのは点群全体になってしまう。</p>
      <p>InstancedMeshを組み合わせてメッシュ化すると、個々のメッシュを選択でき、かつ個々のメッシュに独自のアトリビュートを持たせられる。</p>
      <p>点群のいらない部分、異常値っぽい部分をSelectionBoxで選択して削除し、新たなCSVファイルとしてダウンロードできるようにしたのがこれ。</p>
      <p>削除といっても実際には点群の色を背景色と同じにして見えなくしているだけで、画面上には存在している。</p>
      <p>独自のアトリビュートremovedに値を設定して、削除済みであることをマークして、CSVをダウンロードするときにそれらを除外している。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-load-csv-instancedgeometry-selectionbox.html">
          <figure>
            <img src="./asset/index-load-csv-instancedgeometry-selectionbox.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-load-csv-instancedgeometry-selectionbox.html">index-load-csv-instancedgeometry-selectionbox.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/load-csv-instancedgeometry-selectionbox.js">load-csv-instancedgeometry-selectionbox.js</a>
      </p>



      <h2>ExtrudeGeometry from Topojson</h2>

      <p>Topojsonを読み込んでパスシェイプを作り、ExtrudeGeometryで立体化した例。</p>
      <p>Topojsonは手持ちで持っていた神奈川県三浦市のものを利用。</p>
      <p>三浦市のデータは'Polygon'しかないので、'MultiPolygon'や'LineString'が含まれる地図データを使うと恐らくうまく動かないと思う。</p>
      <p>本当に正しく三浦市の形に描画できているか不安になるが、ボート釣りのホームグランドの油壷付近は確かに見覚えがある。</p>
      <p>なお、そのままだと小さいので適当に拡大しているが、topojsonデータにはscale情報も格納されているので、うまく処理すれば画面サイズにフィットするように大きさを調整できると思う。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-load-topojson.html">
          <figure>
            <img src="./asset/index-load-topojson.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-load-topojson.html">index-load-topojson.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/load-topojson.js">load-topojson.js</a>
      </p>



      <h2>Move along path</h2>

      <p>オブジェクトをパスに沿って移動させる例。</p>
      <p><a href="https://observablehq.com/@rveciana/three-js-object-moving-object-along-path">この例</a>をそのまま引用。</p>
      <p>魚群探知機から抽出したGPS座標にそってオブジェクトを移動するなら、この例が使えそう。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-move-along-path.html">
          <figure>
            <img src="./asset/index-move-along-path.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-move-along-path.html">index-move-along-path.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/move-along-path.js">move-along-path.js</a>
      </p>



      <h2>Move along path （イマイチ）</h2>

      <p>ということで、１回の釣行で得られる魚群探知機のデータを可視化してみた例。</p>
      <p>グレーの線がボートの移動を、緑の線が水深を表している。</p>
      <p>ボートの向きは必ずしも進行方向を向いていないのが分かる。</p>
      <p>魚探の電源を切っている時間が散在するので、データの加工をもう少し工夫しないとだめだなぁ・・・</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-move-along-path2.html">
          <figure>
            <img src="./asset/index-move-along-path2.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-move-along-path2.html">index-move-along-path2.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/move-along-path2.js">move-along-path2.js</a>
      </p>



      <h2>Move along path</h2>

      <p>パーティクルをパスに沿って移動させる例。</p>
      <p>Curveクラスが持っている getPointAt(fraction) を使うとパス上の任意の場所の座標を得られるので、そこにpositionを移動すればいい。</p>
      <p>ただし、位置の指定をJavaScript側でフレームごとに実行しているので、多数のパーティクルを使うと重くなってしまう。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-move-along-path3.html">
          <figure>
            <img src="./asset/index-move-along-path3.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-move-along-path3.html">index-move-along-path3.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/move-along-path3.js">move-along-path3.js</a>
      </p>



      <h2>GPGPU move along path</h2>

      <p>パーティクルをパスに沿って移動させる例。</p>
      <p>見た目は前述のものとまったく同じ。</p>
      <p>パーティクルの位置を事前に計算してGPGPUのテクスチャに保存しておき、シェーダーでそれを参照して位置を変えていく。</p>
      <p>JavaScript側はfractionの値を更新するだけなので、CPUに負荷はかからない。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-gpgpu-move-along-path.html">
          <figure>
            <img src="./asset/index-gpgpu-move-along-path.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-gpgpu-move-along-path.html">index-gpgpu-move-along-path.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/gpgpu-move-along-path.js">gpgpu-move-along-path.js</a>
      </p>



      <h2>GPGPU move along path</h2>

      <p>GPGPUを使えばCPUに負荷がかからないことを実証するために、多数のパーティクルをパスに沿って移動させた例。</p>
      <p>100本のパス上に100個のパーティクルを配置したので、総数1万個のパーティクルが移動している。</p>
      <p>動かしてみれば分かるが、ブラウザが重くなるようなことはない。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-gpgpu-move-along-path2.html">
          <figure>
            <img src="./asset/index-gpgpu-move-along-path2.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-gpgpu-move-along-path2.html">index-gpgpu-move-along-path2.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/gpgpu-move-along-path2.js">gpgpu-move-along-path2.js</a>
      </p>



      <h2>GPGPU Particle trail</h2>

      <p>頂点を移動すると共に、その尻尾を描画する例。</p>
      <p>フレームごとに時刻情報だけをuniformでGPUに渡して、線を移動させる処理は全てGPUで処理している。</p>
      <p>中身は<a href="https://qiita.com/ukonpower/items/26411c4fa588cd2e772e">この例</a>を手直ししたもの。</p>
      <br>
      <p>GPGPUを簡単に使えるようにするヘルパー GPUComputationRenderer.js を使っているものの、それでも難解。</p>
      <p>後から見直したときに分かるようにコメントを多めに書いておいた。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-gpgpu-particles3.html">
          <figure>
            <img src="./asset/index-gpgpu-particles3.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <br>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-gpgpu-particles3.html">index-gpgpu-particles3.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/gpgpu-particles3.js">gpgpu-particles3.js</a>
      </p>



      <h2>Transform using shader</h2>

      <p>シェーダーでオブジェクトを移動、変形する例。</p>
      <p><a href="https://misora.main.jp/blog/archives/213">ここ</a>から引用。</p>

      <br>

      <p>
        <a href="https://takamitsu-iida.github.io/threejs-practice/index-transform-shader.html">
          <figure>
            <img src="./asset/index-transform-shader.html.png" />
            <figcaption>Live Demo</figcaption>
          </figure>
        </a>
      </p>

      <p>
        HTML <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/index-transform-shader.html">index-transform-shader.html</a>
      </p>
      <p>
        JavaScript <a href="https://github.com/takamitsu-iida/threejs-practice/blob/master/static/site/js/transform-shader.js">transform-shader.js</a>
      </p>




      <br><br><br><br>


    </div>

  </div>

</body>

</html>